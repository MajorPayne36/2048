{"version":3,"sources":["socket/Actions.js","game/GameBoard.js","controllers/GameController.jsx","hooks/useStateWithCallback.js","socket/index.js","hooks/useWebRTC.js","pages/Room.jsx","pages/Main.jsx","pages/NotFound.jsx","game/UnityClickyGame.jsx","game/UnityJumperGame.jsx","App.js","index.js"],"names":["module","exports","JOIN","LEAVE","COUNT","PRESENT","SHARE_ROOMS","ADD_PEER","REMOVE_PEER","RELAY_SDP","RELAY_ICE","ICE_CANDIDATE","SESSION_DESCRIPTION","hasValue","board","value","i","length","j","getRandomPosition","Math","floor","random","generateRandom","isFull","row","col","compress","newBoard","colIndex","moveLeft","newBoard2","merge","reverse","reverseBoard","moveRight","reversedBoard","rotateLeft","rotateBoard","rotateRight","moveUp","moveDown","hasDiff","updatedBoard","Cell","number","className","GameController","useState","updateBoard","checkEndGame","checkWin","isOver","message","error","success","left","right","up","down","onKeyDown","e","key","useEffect","window","addEventListener","removeEventListener","xs","span","offset","xl","map","cell","document","documentElement","scrollWidth","onClick","useStateWithCallback","initialState","state","setState","cbRef","useRef","updateState","useCallback","newState","cb","current","prev","socket","io","reconnectionAttempts","timeout","transports","LOCAL_VIDEO","LOCAL_AUDIO","Room","roomID","clients","updateClients","addNewClient","newClient","list","includes","peerConnections","localVideoStream","localAudioStream","peerMediaElements","a","peerID","createOffer","console","warn","RTCPeerConnection","iceServers","freeice","onicecandidate","event","candidate","emit","ACTIONS","iceCandidate","tracksNumber","ontrack","remoteStream","streams","srcObject","settled","interval","setInterval","clearInterval","getTracks","forEach","track","addTrack","offer","setLocalDescription","sessionDescription","on","off","remoteDescription","setRemoteDescription","RTCSessionDescription","type","createAnswer","answer","addIceCandidate","RTCIceCandidate","close","filter","c","navigator","mediaDevices","getUserMedia","audio","catch","err","name","video","localVideoElement","localAudioElement","volume","startCapture","then","room","stop","provideMediaRef","id","node","useWebRTC","useParams","videoLayout","clientsNumber","pairs","Array","from","reduce","acc","next","index","arr","push","slice","rowsNumber","height","width","flat","layout","style","display","alignItems","justifyContent","flexWrap","clientID","ref","instance","autoPlay","playsInline","muted","Main","history","useHistory","rooms","updateRooms","count","updateCount","rootNode","columns","title","dataIndex","render","text","record","size","ghost","dataSource","color","log","v4","NotFound","UnityClickyGame","unityContext","UnityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","border","background","App","position","zIndex","theme","mode","Item","to","padding","marginTop","margin","minHeight","exact","path","component","UnityJumperGame","textAlign","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.10cf04c3.chunk.js","sourcesContent":["const ACTIONS = {\r\n    JOIN: 'join',\r\n    LEAVE: 'leave',\r\n    COUNT: 'count',\r\n    PRESENT: 'present',\r\n    SHARE_ROOMS: 'share-rooms',\r\n    ADD_PEER: 'add-peer',\r\n    REMOVE_PEER: 'remove-peer',\r\n    RELAY_SDP: 'relay-sdp',\r\n    RELAY_ICE: 'relay-ice',\r\n    ICE_CANDIDATE: 'ice-candidate',\r\n    SESSION_DESCRIPTION: 'session-description'\r\n  };\r\n  \r\n  module.exports = ACTIONS;","export const getEmptyBoard = () => [\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n];\r\n\r\nconst hasValue = (board, value) => {\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board[i].length; j++) {\r\n            if (board[i][j] === value) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nexport const isFull = (board) => {\r\n    return !hasValue(board, 0);\r\n};\r\n\r\nconst getRandomPosition = () => {\r\n    const rowPosition = Math.floor(Math.random() * 4);\r\n    const colPosition = Math.floor(Math.random() * 4);\r\n    return [rowPosition, colPosition];\r\n};\r\n\r\nexport const generateRandom = (board) => {\r\n    if (isFull(board)) {\r\n        return board;\r\n    }\r\n\r\n    let [row, col] = getRandomPosition();\r\n    while (board[row][col] !== 0) {\r\n        [row, col] = getRandomPosition();\r\n    }\r\n\r\n    board[row][col] = 2;\r\n    return board;\r\n};\r\n\r\nconst compress = (board) => {\r\n    const newBoard = getEmptyBoard();\r\n    for (let i = 0; i < board.length; i++) {\r\n        let colIndex = 0;\r\n        for (let j = 0; j < board[i].length; j++) {\r\n            if (board[i][j] !== 0) {\r\n                newBoard[i][colIndex] = board[i][j];\r\n                colIndex++;\r\n            }\r\n        }\r\n    }\r\n    return newBoard;\r\n};\r\n\r\nconst merge = (board) => {\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board[i].length - 1; j++) {\r\n            if (board[i][j] !== 0 && board[i][j] === board[i][j + 1]) {\r\n                board[i][j] = board[i][j] * 2;\r\n                board[i][j + 1] = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    return board;\r\n};\r\n\r\nexport const moveLeft = (board) => {\r\n    const newBoard1 = compress(board);\r\n    const newBoard2 = merge(newBoard1);\r\n    return compress(newBoard2);\r\n};\r\n\r\nconst reverse = (board) => {\r\n    const reverseBoard = getEmptyBoard();\r\n\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board[i].length; j++) {\r\n            reverseBoard[i][j] = board[i][board[i].length - 1 - j];\r\n        }\r\n    }\r\n\r\n    return reverseBoard;\r\n};\r\n\r\nexport const moveRight = (board) => {\r\n    const reversedBoard = reverse(board);\r\n    const newBoard = moveLeft(reversedBoard);\r\n    return reverse(newBoard);\r\n};\r\n\r\nconst rotateLeft = (board) => {\r\n    const rotateBoard = getEmptyBoard();\r\n\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board[i].length; j++) {\r\n            rotateBoard[i][j] = board[j][board[i].length - 1 - i];\r\n        }\r\n    }\r\n\r\n    return rotateBoard;\r\n};\r\n\r\nconst rotateRight = (board) => {\r\n    const rotateBoard = getEmptyBoard();\r\n\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board[i].length; j++) {\r\n            rotateBoard[i][j] = board[board[i].length - 1 - j][i];\r\n        }\r\n    }\r\n\r\n    return rotateBoard;\r\n};\r\n\r\nexport const moveUp = (board) => {\r\n    const rotateBoard = rotateLeft(board);\r\n    const newBoard = moveLeft(rotateBoard);\r\n    return rotateRight(newBoard);\r\n};\r\n\r\nexport const moveDown = (board) => {\r\n    const rotateBoard = rotateRight(board);\r\n    const newBoard = moveLeft(rotateBoard);\r\n    return rotateLeft(newBoard);\r\n};\r\n\r\nexport const checkWin = (board) => {\r\n    return hasValue(board, 2048);\r\n};\r\n\r\nconst hasDiff = (board, updatedBoard) => {\r\n    for (let i = 0; i < board.length; i++) {\r\n        for (let j = 0; j < board[i].length; j++) {\r\n            if (board[i][j] !== updatedBoard[i][j]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nexport const isOver = (board) => {\r\n    if (hasDiff(board, moveLeft(board))) {\r\n        return false;\r\n    }\r\n    if (hasDiff(board, moveRight(board))) {\r\n        return false;\r\n    }\r\n    if (hasDiff(board, moveUp(board))) {\r\n        return false;\r\n    }\r\n    if (hasDiff(board, moveDown(board))) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, message, Row } from 'antd';\r\n\r\nimport {\r\n    getEmptyBoard,\r\n    generateRandom,\r\n    moveLeft,\r\n    moveRight,\r\n    moveUp,\r\n    moveDown,\r\n    isOver,\r\n    checkWin\r\n} from \"../game/GameBoard\";\r\n\r\nconst Cell = ({ number }) => {\r\n    return (\r\n        <div className={`cell cell-${number}`}>{number > 0 ? number : \"\"}</div>\r\n    );\r\n};\r\n\r\nconst GameController = () => {\r\n    const [board, updateBoard] = useState(generateRandom(getEmptyBoard()));\r\n\r\n    const checkEndGame = () => {\r\n        if (checkWin(board)) {\r\n            message.success(\"You win!\");\r\n        } else if (isOver(board)) {\r\n            message.error(\"Game over!\");\r\n        }\r\n    };\r\n\r\n    const left = () => {\r\n        const newBoard = moveLeft(board);\r\n        updateBoard(generateRandom(newBoard));\r\n        checkEndGame();\r\n    };\r\n\r\n    const right = () => {\r\n        const newBoard = moveRight(board);\r\n        updateBoard(generateRandom(newBoard));\r\n        checkEndGame();\r\n    };\r\n\r\n    const up = () => {\r\n        const newBoard = moveUp(board);\r\n        updateBoard(generateRandom(newBoard));\r\n        checkEndGame();\r\n    };\r\n\r\n    const down = () => {\r\n        const newBoard = moveDown(board);\r\n        updateBoard(generateRandom(newBoard));\r\n        checkEndGame();\r\n    };\r\n\r\n    const onKeyDown = (e) => {\r\n        switch (e.key) {\r\n            case \"ArrowLeft\":\r\n                left();\r\n                break;\r\n            case \"ArrowRight\":\r\n                right();\r\n                break;\r\n            case \"ArrowUp\":\r\n                up();\r\n                break;\r\n            case \"ArrowDown\":\r\n                down();\r\n                break;\r\n\r\n            default:\r\n        }\r\n    };\r\n\r\n    const mobileVersion = () => {\r\n        if (document.documentElement.scrollWidth < 600) {\r\n            return (\r\n                <>\r\n                    <Row>\r\n                        <Col span={4} offset={10}>\r\n                            <Button onClick={up}>\r\n                                Вверх\r\n                            </Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col span={4} offset={6}>\r\n                            <Button onClick={left}>\r\n                                Право\r\n                            </Button>\r\n                        </Col>\r\n                        <Col span={4} offset={4}>\r\n                            <Button onClick={right}>\r\n                                Право\r\n                            </Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col span={4} offset={10}>\r\n                            <Button onClick={down}>\r\n                                Вниз\r\n                            </Button>\r\n                        </Col>\r\n                    </Row>\r\n                </>\r\n            )\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"keydown\", onKeyDown);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"keydown\", onKeyDown);\r\n        };\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <div className=\"game-board\">\r\n                <Row>\r\n                    {/* <Col xs={0} xl={7}>\r\n                    </Col> */}\r\n\r\n                    <Col xs={{ span: 24, offset: 0 }} xl={{ span: 10, offset: 7 }}>\r\n                        {board.map((row, i) => {\r\n                            return (\r\n                                <div key={`row-${i}`} className=\"row\">\r\n                                    {row.map((cell, j) => (\r\n                                        <Cell key={`cell-${i}-${j}`} number={cell} />\r\n                                    ))}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </Col>\r\n\r\n                    {/* <Col xs={0} xl={7}>\r\n                    </Col> */}\r\n                </Row>\r\n                {mobileVersion()}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default GameController;\r\n","import {useState, useCallback, useRef, useEffect} from 'react';\r\n\r\nconst useStateWithCallback = initialState => {\r\n  const [state, setState] = useState(initialState);\r\n  const cbRef = useRef(null);\r\n\r\n  const updateState = useCallback((newState, cb) => {\r\n    cbRef.current = cb;\r\n\r\n    setState(prev => typeof newState === 'function' ? newState(prev) : newState);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cbRef.current) {\r\n      cbRef.current(state);\r\n      cbRef.current = null;\r\n    }\r\n  }, [state]);\r\n\r\n  return [state, updateState];\r\n}\r\n\r\nexport default useStateWithCallback;","import {io} from 'socket.io-client';\r\n\r\nconst options = {\r\n  \"force new connection\": true,\r\n  reconnectionAttempts: \"Infinity\", // avoid having user reconnect manually in order to prevent dead clients after a server restart\r\n  timeout : 10000, // before connect_error and connect_timeout are emitted.\r\n  transports : [\"websocket\"]\r\n}\r\n\r\nconst socket = io('wss://video-guru-app-server.herokuapp.com', options);\r\n\r\nexport default socket;","import { useEffect, useRef, useCallback } from 'react';\r\nimport freeice from 'freeice';\r\nimport useStateWithCallback from './useStateWithCallback';\r\nimport socket from '../socket';\r\nimport ACTIONS from '../socket/Actions';\r\nimport { message } from 'antd';\r\n\r\nexport const LOCAL_VIDEO = 'LOCAL_VIDEO';\r\nexport const LOCAL_AUDIO = 'LOCAL_AUDIO';\r\n\r\n\r\nexport default function useWebRTC(roomID) {\r\n  const [clients, updateClients] = useStateWithCallback([]);\r\n\r\n  const addNewClient = useCallback((newClient, cb) => {\r\n    updateClients(list => {\r\n      if (!list.includes(newClient)) {\r\n        return [...list, newClient]\r\n      }\r\n\r\n      return list;\r\n    }, cb);\r\n  }, [updateClients]);\r\n\r\n  const peerConnections = useRef({});\r\n  const localVideoStream = useRef(null);\r\n  const localAudioStream = useRef(null);\r\n  const peerMediaElements = useRef({\r\n    [LOCAL_VIDEO]: null,\r\n    [LOCAL_AUDIO]: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    async function handleNewPeer({ peerID, createOffer }) {\r\n      if (peerID in peerConnections.current) {\r\n        return console.warn(`Already connected to peer ${peerID}`);\r\n      }\r\n\r\n      peerConnections.current[peerID] = new RTCPeerConnection({\r\n        iceServers: freeice(),\r\n      });\r\n\r\n      peerConnections.current[peerID].onicecandidate = event => {\r\n        if (event.candidate) {\r\n          socket.emit(ACTIONS.RELAY_ICE, {\r\n            peerID,\r\n            iceCandidate: event.candidate,\r\n          });\r\n        }\r\n      }\r\n\r\n      let tracksNumber = 0;\r\n      peerConnections.current[peerID].ontrack = ({ streams: [remoteStream] }) => {\r\n        tracksNumber++\r\n\r\n        if (tracksNumber === 1) { // video & audio tracks received\r\n          tracksNumber = 0;\r\n          addNewClient(peerID, () => {\r\n            if (peerMediaElements.current[peerID]) {\r\n              peerMediaElements.current[peerID].srcObject = remoteStream;\r\n            } else {\r\n              // FIX LONG RENDER IN CASE OF MANY CLIENTS\r\n              let settled = false;\r\n              const interval = setInterval(() => {\r\n                if (peerMediaElements.current[peerID]) {\r\n                  peerMediaElements.current[peerID].srcObject = remoteStream;\r\n                  settled = true;\r\n                }\r\n\r\n                if (settled) {\r\n                  clearInterval(interval);\r\n                }\r\n              }, 1000);\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      if (localAudioStream.current) {\r\n        localAudioStream.current.getTracks().forEach(track => {\r\n          peerConnections.current[peerID].addTrack(track, localAudioStream.current);\r\n        });\r\n      }\r\n      if (localVideoStream.current) {\r\n        localVideoStream.current.getTracks().forEach(track => {\r\n          peerConnections.current[peerID].addTrack(track, localVideoStream.current);\r\n        });\r\n      }\r\n\r\n      // localMediaStream.current.getTracks().forEach(track => {\r\n      //   peerConnections.current[peerID].addTrack(track, localMediaStream.current);\r\n      // });\r\n\r\n      if (createOffer) {\r\n        const offer = await peerConnections.current[peerID].createOffer();\r\n\r\n        await peerConnections.current[peerID].setLocalDescription(offer);\r\n\r\n        socket.emit(ACTIONS.RELAY_SDP, {\r\n          peerID,\r\n          sessionDescription: offer,\r\n        });\r\n      }\r\n    }\r\n\r\n    socket.on(ACTIONS.ADD_PEER, handleNewPeer);\r\n\r\n    return () => {\r\n      socket.off(ACTIONS.ADD_PEER);\r\n    }\r\n  }, [addNewClient]);\r\n\r\n  useEffect(() => {\r\n    async function setRemoteMedia({ peerID, sessionDescription: remoteDescription }) {\r\n      await peerConnections.current[peerID]?.setRemoteDescription(\r\n        new RTCSessionDescription(remoteDescription)\r\n      );\r\n\r\n      if (remoteDescription.type === 'offer') {\r\n        const answer = await peerConnections.current[peerID].createAnswer();\r\n\r\n        await peerConnections.current[peerID].setLocalDescription(answer);\r\n\r\n        socket.emit(ACTIONS.RELAY_SDP, {\r\n          peerID,\r\n          sessionDescription: answer,\r\n        });\r\n      }\r\n    }\r\n\r\n    socket.on(ACTIONS.SESSION_DESCRIPTION, setRemoteMedia)\r\n\r\n    return () => {\r\n      socket.off(ACTIONS.SESSION_DESCRIPTION);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.on(ACTIONS.ICE_CANDIDATE, ({ peerID, iceCandidate }) => {\r\n      peerConnections.current[peerID]?.addIceCandidate(\r\n        new RTCIceCandidate(iceCandidate)\r\n      );\r\n    });\r\n\r\n    return () => {\r\n      socket.off(ACTIONS.ICE_CANDIDATE);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleRemovePeer = ({ peerID }) => {\r\n      if (peerConnections.current[peerID]) {\r\n        peerConnections.current[peerID].close();\r\n      }\r\n\r\n      delete peerConnections.current[peerID];\r\n      delete peerMediaElements.current[peerID];\r\n\r\n      updateClients(list => list.filter(c => c !== peerID));\r\n    };\r\n\r\n    socket.on(ACTIONS.REMOVE_PEER, handleRemovePeer);\r\n\r\n    return () => {\r\n      socket.off(ACTIONS.REMOVE_PEER);\r\n    }\r\n  }, [updateClients]);\r\n\r\n  useEffect(() => {\r\n    async function startCapture() {\r\n      // localMediaStream.current = await navigator.mediaDevices.getUserMedia({\r\n      //   audio: true,\r\n      //   video: true\r\n      // }).catch(err => {\r\n      //   message.error(\"Не можем получить доступ к устройствам пользователя\");\r\n      //   console.error(err.name + \": \" + err.message);\r\n      // });\r\n\r\n      localAudioStream.current = await navigator.mediaDevices.getUserMedia({\r\n        audio: true\r\n      }).catch(err => {\r\n        message.error(\"Устройство звука не найдено\");\r\n        console.error(err.name + \": \" + err.message);\r\n      });\r\n\r\n      localVideoStream.current = await navigator.mediaDevices.getUserMedia({\r\n        video: true\r\n      }).catch(err => {\r\n        message.error(\"Виеокамера не обнаружено\");\r\n        console.error(err.name + \": \" + err.message);\r\n      });\r\n\r\n      addNewClient(LOCAL_VIDEO, () => {\r\n        const localVideoElement = peerMediaElements.current[LOCAL_VIDEO];\r\n        const localAudioElement = peerMediaElements.current[LOCAL_AUDIO];\r\n\r\n        if (localVideoElement) {\r\n          localVideoElement.volume = 0;\r\n          localVideoElement.srcObject = localVideoStream.current;\r\n        }\r\n        if (localAudioElement) {\r\n          localAudioElement.volume = 0;\r\n          localAudioElement.srcObject = localAudioStream.current;\r\n        }\r\n      });\r\n    }\r\n\r\n    startCapture()\r\n      .then(() => socket.emit(ACTIONS.JOIN, { room: roomID }))\r\n      .catch(e => console.error('Error getting userMedia:', e));\r\n\r\n    return () => {\r\n\r\n\r\n      if (localAudioStream.current) {\r\n        localAudioStream.current.getTracks().forEach(track => track.stop());\r\n      }\r\n      \r\n      if (localVideoStream.current) {\r\n        localVideoStream.current.getTracks().forEach(track => track.stop());\r\n      }\r\n      socket.emit(ACTIONS.LEAVE);\r\n    };\r\n  }, [addNewClient, roomID]);\r\n\r\n  const provideMediaRef = useCallback((id, node) => {\r\n    peerMediaElements.current[id] = node;\r\n  }, []);\r\n\r\n  return {\r\n    clients,\r\n    provideMediaRef\r\n  };\r\n}","import { useParams } from 'react-router';\r\nimport useWebRTC, { LOCAL_VIDEO } from '../hooks/useWebRTC';\r\n\r\nfunction layout(clientsNumber = 1) {\r\n    const pairs = Array.from({ length: clientsNumber })\r\n        .reduce((acc, next, index, arr) => {\r\n            if (index % 2 === 0) {\r\n                acc.push(arr.slice(index, index + 2));\r\n            }\r\n\r\n            return acc;\r\n        }, []);\r\n\r\n    const rowsNumber = pairs.length;\r\n    const height = `${100 / rowsNumber}%`;\r\n\r\n    return pairs.map((row, index, arr) => {\r\n\r\n        if (index === arr.length - 1 && row.length === 1) {\r\n            return [{\r\n                width: '100%',\r\n                height,\r\n            }];\r\n        }\r\n\r\n        return row.map(() => ({\r\n            width: '50%',\r\n            height,\r\n        }));\r\n    }).flat();\r\n}\r\n\r\nexport default function Room() {\r\n    const { id: roomID } = useParams();\r\n    const { clients, provideMediaRef } = useWebRTC(roomID);\r\n    const videoLayout = layout(clients.length);\r\n\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            flexWrap: 'wrap',\r\n            height: '100vh',\r\n        }}>\r\n            {clients.map((clientID, index) => {\r\n                return (\r\n                    <div key={clientID} style={videoLayout[index]} id={clientID}>\r\n                        <video\r\n                            width='100%'\r\n                            height='100%'\r\n                            ref={instance => {\r\n                                provideMediaRef(clientID, instance);\r\n                            }}\r\n                            autoPlay\r\n                            playsInline\r\n                            muted={clientID === LOCAL_VIDEO}\r\n                        />\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}","import { useState, useEffect, useRef } from 'react';\r\nimport { Space, Table, Tag } from 'antd';\r\nimport socket from '../socket';\r\nimport ACTIONS from '../socket/Actions';\r\nimport { useHistory } from 'react-router';\r\nimport { v4 } from 'uuid';\r\nimport { Button } from 'antd';\r\n\r\nexport default function Main() {\r\n    const history = useHistory();\r\n    const [rooms, updateRooms] = useState([]);\r\n    const [count, updateCount] = useState([]);\r\n    const rootNode = useRef();\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Название комнаты',\r\n            dataIndex: 'name',\r\n            key: 'name'\r\n        },\r\n        {\r\n            title: 'Количество',\r\n            dataIndex: 'count',\r\n            key: 'count'\r\n        },\r\n        {\r\n            title: 'Действие',\r\n            dataIndex: 'join',\r\n            key: 'join',\r\n            render: (text, record) => (\r\n                <Space size=\"middle\">\r\n                    <Button ghost type='primary' onClick={() => {\r\n                        history.push(`/2048/room/${record.name}`);\r\n                    }}>Войти в комнату</Button>\r\n                </Space>\r\n            )\r\n        }\r\n    ]\r\n\r\n    const dataSource = rooms.map((roomID, i) => {\r\n        return {\r\n            key: i,\r\n            name: roomID,\r\n            count: <Tag color='blue'>{count[i]}</Tag>\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        socket.on(ACTIONS.SHARE_ROOMS, ({ rooms = [], count = [] } = {}) => {\r\n            if (rootNode.current) {\r\n                updateRooms(rooms);\r\n                updateCount(count);\r\n                console.log(rooms);\r\n                console.log(count);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div ref={rootNode}>\r\n            <h1>Доступные комнаты</h1>\r\n            <Table dataSource={dataSource} columns={columns} />\r\n\r\n            <Button type=\"primary\" onClick={() => {\r\n                history.push(`/2048/room/${v4()}`);\r\n            }}>Создать новую комнату</Button>\r\n        </div>\r\n    );\r\n}","export default function NotFound() {\r\n    return (\r\n        <div>\r\n            NOT FOUND.\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport Unity, { UnityContext } from 'react-unity-webgl';\r\n\r\nexport default function UnityClickyGame() {\r\n    const unityContext = new UnityContext({\r\n        loaderUrl: \"build/clicky/Build.loader.js\",\r\n        dataUrl: \"build/clicky/Build.data\",\r\n        frameworkUrl: \"build/clicky/Build.framework.js\",\r\n        codeUrl: \"build/clicky/Build.wasm\",\r\n      });\r\n    return <Unity\r\n        unityContext={unityContext}\r\n        style={{\r\n            height: \"100%\",\r\n            width: 950,\r\n            border: \"2px solid black\",\r\n            background: \"grey\",\r\n        }}\r\n    />\r\n}\r\n","import React from 'react';\r\nimport Unity, { UnityContext } from 'react-unity-webgl';\r\n\r\nexport default function UnityClickyGame() {\r\n    const unityContext = new UnityContext({\r\n        loaderUrl: \"build/jumper/Jumper.loader.js\",\r\n        dataUrl: \"build/jumper/Jumper.data\",\r\n        frameworkUrl: \"build/jumper/Jumper.framework.js\",\r\n        codeUrl: \"build/jumper/Jumper.wasm\",\r\n    });\r\n    return <Unity\r\n        unityContext={unityContext}\r\n        style={{\r\n            height: \"100%\",\r\n            width: 950,\r\n            border: \"2px solid black\",\r\n            background: \"grey\",\r\n        }}\r\n    />\r\n}\r\n","import './App.css';\nimport 'antd/dist/antd.css';\nimport { BrowserRouter, Switch, Route, Link } from 'react-router-dom';\nimport GameController from './controllers/GameController';\nimport { Breadcrumb, Layout, Menu } from 'antd';\nimport { Content, Footer, Header } from 'antd/lib/layout/layout';\nimport Room from './pages/Room';\nimport Main from './pages/Main';\nimport NotFound from './pages/NotFound';\nimport UnityClickyGame from './game/UnityClickyGame';\nimport UnityJumperGame from './game/UnityJumperGame';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n\n      <Layout>\n        <Header style={{ position: 'fixed', zIndex: 1, width: '100%' }}>\n          <div className=\"logo\" />\n          <Menu theme=\"dark\" mode=\"horizontal\" >\n            <Menu.Item key=\"1\"><Link to='/2048/'>Home</Link></Menu.Item>\n            <Menu.Item key=\"2\"><Link to='/2048/2048'>2048</Link></Menu.Item>\n            <Menu.Item key=\"3\"><Link to='/2048/unity/clicky'>Clicky</Link></Menu.Item>\n            <Menu.Item key=\"4\"><Link to='/2048/unity/jumper'>Jumper</Link></Menu.Item>\n          </Menu>\n        </Header>\n        <Content className=\"site-layout\" style={{ padding: '0 50px', marginTop: 64 }}>\n          <Breadcrumb style={{ margin: '16px 0' }}>\n            <Breadcrumb.Item>Home</Breadcrumb.Item>\n            <Breadcrumb.Item>List</Breadcrumb.Item>\n            <Breadcrumb.Item>App</Breadcrumb.Item>\n          </Breadcrumb>\n          <div className=\"site-layout-background\" style={{ padding: 24, minHeight: 380 }}>\n            <div className=\"App\">\n              <Switch>\n                <Route exact path='/2048/room/:id' component={Room} />\n                <Route exact path='/2048/' component={Main} />\n                <Route exact path='/2048/2048' component={GameController} />\n                <Route exact path='/2048/unity/clicky' component={UnityClickyGame} />\n                <Route exact path='/2048/unity/jumper' component={UnityJumperGame} />\n                <Route component={NotFound} />\n              </Switch>\n            </div>\n          </div>\n        </Content>\n        <Footer style={{ textAlign: 'center' }}>  Видеочат. Создатель Григорян Андраник. ВГТУ/ИД-181</Footer>\n      </Layout>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}